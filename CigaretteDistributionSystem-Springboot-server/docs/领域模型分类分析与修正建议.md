# é¢†åŸŸæ¨¡å‹åˆ†ç±»åˆ†æä¸ä¿®æ­£å»ºè®®

## ğŸ“‹ é—®é¢˜åˆ†æ

### é¢„æœŸç»“æ„ï¼ˆDDDåˆ†å±‚æ¶æ„å®Œæ•´ç›®å½•ç»“æ„.md 68-78è¡Œï¼‰

```
domain/model/
â”œâ”€â”€ entity/                    # å®ä½“ï¼ˆèšåˆæ ¹ï¼‰
â”‚   â”œâ”€â”€ Cigarette.java
â”‚   â”œâ”€â”€ Region.java
â”‚   â””â”€â”€ Customer.java
â”œâ”€â”€ valueobject/               # å€¼å¯¹è±¡
â”‚   â”œâ”€â”€ DeliveryMethod.java
â”‚   â”œâ”€â”€ DeliveryCombination.java
â”‚   â””â”€â”€ RegionCustomerMatrix.java
â””â”€â”€ tag/                       # æ ‡ç­¾ç›¸å…³æ¨¡å‹
    â””â”€â”€ TagFilterRule.java
```

### æˆ‘ä¹‹å‰å»ºè®®çš„ç»“æ„

```
domain/model/
â”œâ”€â”€ delivery/                  # æŠ•æ”¾ç›¸å…³æ¨¡å‹ï¼ˆæŒ‰åŠŸèƒ½åˆ†ç»„ï¼‰
â”‚   â”œâ”€â”€ DeliveryCombination.java
â”‚   â”œâ”€â”€ DeliveryMethodType.java
â”‚   â”œâ”€â”€ DeliveryExtensionType.java
â”‚   â””â”€â”€ DeliveryCombinationParser.java
â””â”€â”€ tag/                       # æ ‡ç­¾ç›¸å…³æ¨¡å‹
    â””â”€â”€ TagFilterRule.java
```

## ğŸ” ä¸ºä»€ä¹ˆä¸é‡‡ç”¨é¢„æœŸç»“æ„ï¼Ÿ

### åŸå› åˆ†æ

#### 1. **åŠŸèƒ½å¯¼å‘ vs ç±»å‹å¯¼å‘çš„å†²çª**

**é¢„æœŸç»“æ„**ï¼šæŒ‰**ç±»å‹**åˆ†ç±»ï¼ˆentity/valueobject/tagï¼‰
- ä¼˜ç‚¹ï¼šç¬¦åˆDDDç†è®ºï¼Œæ¸…æ™°åŒºåˆ†å®ä½“å’Œå€¼å¯¹è±¡
- ç¼ºç‚¹ï¼šç›¸å…³åŠŸèƒ½åˆ†æ•£ï¼ŒæŸ¥æ‰¾ä¸ä¾¿

**æˆ‘å»ºè®®çš„ç»“æ„**ï¼šæŒ‰**åŠŸèƒ½**åˆ†ç±»ï¼ˆdelivery/tagï¼‰
- ä¼˜ç‚¹ï¼šç›¸å…³åŠŸèƒ½é›†ä¸­ï¼Œä¾¿äºæŸ¥æ‰¾å’Œç»´æŠ¤
- ç¼ºç‚¹ï¼šä¸ç¬¦åˆDDDç†è®ºï¼Œæ··åˆäº†ä¸åŒç±»å‹çš„æ¨¡å‹

#### 2. **å®é™…ä»£ç å¤æ‚åº¦**

å½“å‰ `service/delivery/` åŒ…å«ï¼š
- `DeliveryCombination.java` - å€¼å¯¹è±¡ï¼ˆä¸å¯å˜ï¼Œæ— å”¯ä¸€æ ‡è¯†ï¼‰
- `DeliveryMethodType.java` - æšä¸¾ï¼ˆå€¼å¯¹è±¡çš„ä¸€ç§ï¼‰
- `DeliveryExtensionType.java` - æšä¸¾ï¼ˆå€¼å¯¹è±¡çš„ä¸€ç§ï¼‰
- `DeliveryCombinationParser.java` - **è§£æå™¨**ï¼ˆä¸æ˜¯æ¨¡å‹ï¼Œæ˜¯æœåŠ¡/å·¥å…·ç±»ï¼‰

**é—®é¢˜**ï¼š
- `DeliveryCombinationParser` ä¸æ˜¯é¢†åŸŸæ¨¡å‹ï¼Œè€Œæ˜¯**é¢†åŸŸæœåŠ¡**æˆ–**å·¥å…·ç±»**
- å¦‚æœæŒ‰ç±»å‹åˆ†ç±»ï¼Œè§£æå™¨åº”è¯¥æ”¾åœ¨ `domain/service/` è€Œä¸æ˜¯ `domain/model/`

#### 3. **é¢„æœŸç»“æ„çš„ä¸å®Œæ•´æ€§**

é¢„æœŸç»“æ„åªåˆ—å‡ºäº†ï¼š
- `DeliveryMethod.java` - ä½†å®é™…ä»£ç ä¸­æ˜¯ `DeliveryMethodType.java`ï¼ˆæšä¸¾ï¼‰
- `DeliveryCombination.java` - âœ… å­˜åœ¨
- `RegionCustomerMatrix.java` - å®é™…åœ¨ `application/orchestrator/` ä¸‹

**ç¼ºå¤±**ï¼š
- `DeliveryExtensionType.java` - æœªåœ¨é¢„æœŸç»“æ„ä¸­
- `DeliveryCombinationParser.java` - æœªåœ¨é¢„æœŸç»“æ„ä¸­ï¼ˆå› ä¸ºå®ƒä¸æ˜¯æ¨¡å‹ï¼‰

## âœ… æ­£ç¡®çš„åˆ†ç±»æ–¹æ¡ˆ

### æ–¹æ¡ˆAï¼šä¸¥æ ¼æŒ‰DDDç†è®ºåˆ†ç±»ï¼ˆæ¨èï¼‰

```
domain/model/
â”œâ”€â”€ entity/                    # å®ä½“ï¼ˆèšåˆæ ¹ï¼‰
â”‚   â”œâ”€â”€ Cigarette.java        # å¾…åˆ›å»º
â”‚   â”œâ”€â”€ Region.java           # å¾…åˆ›å»º
â”‚   â””â”€â”€ Customer.java         # å¾…åˆ›å»º
â”œâ”€â”€ valueobject/              # å€¼å¯¹è±¡
â”‚   â”œâ”€â”€ DeliveryMethodType.java          # æšä¸¾ï¼ˆå€¼å¯¹è±¡ï¼‰
â”‚   â”œâ”€â”€ DeliveryExtensionType.java       # æšä¸¾ï¼ˆå€¼å¯¹è±¡ï¼‰
â”‚   â”œâ”€â”€ DeliveryCombination.java         # å€¼å¯¹è±¡ï¼ˆä¸å¯å˜ï¼‰
â”‚   â””â”€â”€ RegionCustomerMatrix.java        # å€¼å¯¹è±¡ï¼ˆéœ€ä»application/orchestratorè¿ç§»ï¼‰
â””â”€â”€ tag/                      # æ ‡ç­¾ç›¸å…³æ¨¡å‹
    â””â”€â”€ TagFilterRule.java    # å€¼å¯¹è±¡æˆ–å®ä½“ï¼ˆéœ€ç¡®è®¤ï¼‰
```

**è§£æå™¨å’ŒæœåŠ¡ç±»**ï¼š
```
domain/service/
â””â”€â”€ delivery/                 # æŠ•æ”¾ç›¸å…³é¢†åŸŸæœåŠ¡
    â””â”€â”€ DeliveryCombinationParser.java  # è§£æå™¨ï¼ˆé¢†åŸŸæœåŠ¡ï¼‰
```

**ä¼˜ç‚¹**ï¼š
- âœ… ä¸¥æ ¼ç¬¦åˆDDDç†è®º
- âœ… æ¸…æ™°åŒºåˆ†å®ä½“ã€å€¼å¯¹è±¡ã€æœåŠ¡
- âœ… ä¾¿äºç†è§£é¢†åŸŸæ¨¡å‹ç»“æ„

**ç¼ºç‚¹**ï¼š
- âš ï¸ ç›¸å…³åŠŸèƒ½åˆ†æ•£ï¼ˆdeliveryç›¸å…³çš„ç±»åˆ†æ•£åœ¨valueobjectå’Œserviceä¸‹ï¼‰
- âš ï¸ éœ€è¦åˆ›å»ºentityç›®å½•å’Œå®ä½“ç±»ï¼ˆå½“å‰ç¼ºå¤±ï¼‰

### æ–¹æ¡ˆBï¼šæ··åˆæ–¹æ¡ˆï¼ˆå®ç”¨ï¼‰

```
domain/model/
â”œâ”€â”€ valueobject/              # å€¼å¯¹è±¡
â”‚   â”œâ”€â”€ delivery/             # æŠ•æ”¾ç›¸å…³å€¼å¯¹è±¡ï¼ˆå­åˆ†ç±»ï¼‰
â”‚   â”‚   â”œâ”€â”€ DeliveryMethodType.java
â”‚   â”‚   â”œâ”€â”€ DeliveryExtensionType.java
â”‚   â”‚   â””â”€â”€ DeliveryCombination.java
â”‚   â””â”€â”€ RegionCustomerMatrix.java
â””â”€â”€ tag/                      # æ ‡ç­¾ç›¸å…³æ¨¡å‹
    â””â”€â”€ TagFilterRule.java
```

**è§£æå™¨**ï¼š
```
domain/service/delivery/      # æŠ•æ”¾ç›¸å…³é¢†åŸŸæœåŠ¡
â””â”€â”€ DeliveryCombinationParser.java
```

**ä¼˜ç‚¹**ï¼š
- âœ… åœ¨ç¬¦åˆDDDç†è®ºçš„åŸºç¡€ä¸Šï¼Œä¿æŒåŠŸèƒ½å†…èš
- âœ… ç›¸å…³å€¼å¯¹è±¡é›†ä¸­ç®¡ç†
- âœ… ä¾¿äºæŸ¥æ‰¾å’Œç»´æŠ¤

**ç¼ºç‚¹**ï¼š
- âš ï¸ å¢åŠ äº†å­ç›®å½•å±‚çº§
- âš ï¸ éœ€è¦ç¡®è®¤æ˜¯å¦æ‰€æœ‰å€¼å¯¹è±¡éƒ½éœ€è¦å­åˆ†ç±»

## ğŸ¯ æˆ‘çš„å»ºè®®ä¿®æ­£

### æ¨èæ–¹æ¡ˆï¼šæ–¹æ¡ˆAï¼ˆä¸¥æ ¼æŒ‰DDDç†è®ºï¼‰

**ç†ç”±**ï¼š

1. **ç¬¦åˆDDDåŸåˆ™**
   - å®ä½“å’Œå€¼å¯¹è±¡æ˜¯DDDçš„æ ¸å¿ƒæ¦‚å¿µï¼Œåº”è¯¥æ˜ç¡®åŒºåˆ†
   - å€¼å¯¹è±¡ï¼ˆValue Objectï¼‰çš„ç‰¹å¾ï¼šä¸å¯å˜ã€æ— å”¯ä¸€æ ‡è¯†ã€é€šè¿‡å€¼ç›¸ç­‰æ€§æ¯”è¾ƒ
   - å®ä½“ï¼ˆEntityï¼‰çš„ç‰¹å¾ï¼šæœ‰å”¯ä¸€æ ‡è¯†ã€å¯å˜ã€é€šè¿‡æ ‡è¯†æ¯”è¾ƒ

2. **å½“å‰ä»£ç åˆ†æ**
   - `DeliveryCombination` - âœ… å€¼å¯¹è±¡ï¼ˆä¸å¯å˜ï¼Œfinalå­—æ®µï¼Œæ— IDï¼‰
   - `DeliveryMethodType` - âœ… æšä¸¾ï¼ˆå€¼å¯¹è±¡çš„ä¸€ç§ï¼‰
   - `DeliveryExtensionType` - âœ… æšä¸¾ï¼ˆå€¼å¯¹è±¡çš„ä¸€ç§ï¼‰
   - `DeliveryCombinationParser` - âŒ ä¸æ˜¯æ¨¡å‹ï¼Œæ˜¯æœåŠ¡/å·¥å…·ç±»

3. **é¢„æœŸç»“æ„çš„åˆç†æ€§**
   - é¢„æœŸç»“æ„æ˜¯ç»è¿‡è®¾è®¡çš„ï¼Œç¬¦åˆDDDæœ€ä½³å®è·µ
   - è™½ç„¶å½“å‰ä»£ç ä¸­ç¼ºå°‘entityï¼Œä½†è¿™æ˜¯æœªæ¥æ‰©å±•çš„æ–¹å‘
   - å€¼å¯¹è±¡é›†ä¸­ç®¡ç†ï¼Œä¾¿äºç†è§£å’Œç»´æŠ¤

### å…·ä½“è¿ç§»å»ºè®®

#### ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ­£ç¡®çš„ç›®å½•ç»“æ„
```
domain/model/
â”œâ”€â”€ entity/          # åˆ›å»ºï¼ˆå½“å‰ä¸ºç©ºï¼Œä¸ºæœªæ¥æ‰©å±•é¢„ç•™ï¼‰
â”œâ”€â”€ valueobject/     # åˆ›å»º
â””â”€â”€ tag/             # å·²å­˜åœ¨
```

#### ç¬¬äºŒæ­¥ï¼šè¿ç§»å€¼å¯¹è±¡
- `service/delivery/DeliveryCombination.java` â†’ `domain/model/valueobject/DeliveryCombination.java`
- `service/delivery/DeliveryMethodType.java` â†’ `domain/model/valueobject/DeliveryMethodType.java`
- `service/delivery/DeliveryExtensionType.java` â†’ `domain/model/valueobject/DeliveryExtensionType.java`

#### ç¬¬ä¸‰æ­¥ï¼šè¿ç§»è§£æå™¨ï¼ˆé¢†åŸŸæœåŠ¡ï¼‰
- `service/delivery/DeliveryCombinationParser.java` â†’ `domain/service/delivery/DeliveryCombinationParser.java`

#### ç¬¬å››æ­¥ï¼šè¿ç§»RegionCustomerMatrix
- `application/orchestrator/RegionCustomerMatrix.java` â†’ `domain/model/valueobject/RegionCustomerMatrix.java`
- æ³¨æ„ï¼šéœ€è¦æ£€æŸ¥æ˜¯å¦åº”è¯¥ä½œä¸ºå€¼å¯¹è±¡ï¼Œè¿˜æ˜¯åº”è¯¥ä¿ç•™åœ¨applicationå±‚

#### ç¬¬äº”æ­¥ï¼šè¿ç§»TagFilterRule
- `service/model/tag/TagFilterRule.java` â†’ `domain/model/tag/TagFilterRule.java`
- æ³¨æ„ï¼šéœ€è¦ç¡®è®¤TagFilterRuleæ˜¯å€¼å¯¹è±¡è¿˜æ˜¯å®ä½“

## ğŸ“ ä¸ºä»€ä¹ˆä¸é‡‡ç”¨é¢„æœŸç»“æ„çš„æ ¹æœ¬åŸå› 

### æˆ‘çš„é”™è¯¯å‡è®¾

1. **åŠŸèƒ½å†…èšä¼˜å…ˆ**ï¼šæˆ‘é”™è¯¯åœ°è®¤ä¸ºæŒ‰åŠŸèƒ½åˆ†ç»„ï¼ˆdelivery/ï¼‰æ¯”æŒ‰ç±»å‹åˆ†ç»„ï¼ˆvalueobject/ï¼‰æ›´å®ç”¨
2. **å¿½ç•¥DDDç†è®º**ï¼šæˆ‘æ²¡æœ‰å……åˆ†è€ƒè™‘DDDä¸­å®ä½“å’Œå€¼å¯¹è±¡çš„æœ¬è´¨åŒºåˆ«
3. **ç®€åŒ–è¿ç§»**ï¼šæˆ‘è¯•å›¾ç®€åŒ–è¿ç§»è¿‡ç¨‹ï¼Œé¿å…åˆ›å»ºæ–°çš„å­ç›®å½•ç»“æ„

### æ­£ç¡®çš„ç†è§£

1. **DDDç†è®ºä¼˜å…ˆ**ï¼šåœ¨DDDæ¶æ„ä¸­ï¼Œå®ä½“å’Œå€¼å¯¹è±¡çš„åŒºåˆ†æ˜¯æ ¸å¿ƒï¼Œä¸åº”è¯¥ä¸ºäº†ä¾¿åˆ©è€Œæ··æ·†
2. **é•¿æœŸç»´æŠ¤æ€§**ï¼šæŒ‰ç±»å‹åˆ†ç±»è™½ç„¶çŸ­æœŸæŸ¥æ‰¾ä¸ä¾¿ï¼Œä½†é•¿æœŸæ¥çœ‹æ›´ç¬¦åˆé¢†åŸŸæ¨¡å‹çš„ç†è§£
3. **æ‰©å±•æ€§**ï¼šentityç›®å½•è™½ç„¶å½“å‰ä¸ºç©ºï¼Œä½†ä¸ºæœªæ¥åˆ›å»ºèšåˆæ ¹é¢„ç•™äº†ç©ºé—´

## âœ… æœ€ç»ˆå»ºè®®

**é‡‡ç”¨é¢„æœŸç»“æ„ï¼ˆæ–¹æ¡ˆAï¼‰**ï¼Œç†ç”±ï¼š

1. âœ… **ä¸¥æ ¼ç¬¦åˆDDDç†è®º** - å®ä½“å’Œå€¼å¯¹è±¡æ˜ç¡®åŒºåˆ†
2. âœ… **ä¾¿äºé¢†åŸŸç†è§£** - å¼€å‘è€…å¯ä»¥æ¸…æ™°ç†è§£å“ªäº›æ˜¯å®ä½“ï¼Œå“ªäº›æ˜¯å€¼å¯¹è±¡
3. âœ… **ä¾¿äºæœªæ¥æ‰©å±•** - entityç›®å½•ä¸ºæœªæ¥åˆ›å»ºèšåˆæ ¹é¢„ç•™ç©ºé—´
4. âœ… **ç¬¦åˆé¢„æœŸè®¾è®¡** - ä¸æ¶æ„æ–‡æ¡£ä¸€è‡´ï¼Œé¿å…åç»­æ··æ·†

**è¿ç§»æ­¥éª¤**ï¼š
1. åˆ›å»º `domain/model/entity/` å’Œ `domain/model/valueobject/` ç›®å½•
2. è¿ç§»deliveryç›¸å…³çš„å€¼å¯¹è±¡åˆ° `domain/model/valueobject/`
3. è¿ç§»è§£æå™¨åˆ° `domain/service/delivery/`
4. è¿ç§»RegionCustomerMatrixï¼ˆéœ€ç¡®è®¤ï¼‰
5. è¿ç§»TagFilterRuleåˆ° `domain/model/tag/`

---

**æ€»ç»“**ï¼šæˆ‘ä¹‹å‰å»ºè®®æŒ‰åŠŸèƒ½åˆ†ç»„æ˜¯**é”™è¯¯çš„**ï¼Œåº”è¯¥ä¸¥æ ¼æŒ‰ç…§DDDç†è®ºï¼Œå°†å€¼å¯¹è±¡æ”¾åœ¨ `domain/model/valueobject/`ï¼Œå®ä½“æ”¾åœ¨ `domain/model/entity/`ï¼ŒæœåŠ¡æ”¾åœ¨ `domain/service/`ã€‚

